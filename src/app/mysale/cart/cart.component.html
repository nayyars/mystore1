<app-mysaleheader></app-mysaleheader>


<div class="container mt-3">

  <!-- ---- Cart---if cart is having item-------- -->
   <div class="row mt-3" *ngIf="disProductList.length > 0; else emptyCart" style="border: 1px solid #F8F9FA;">
    <div class="col-9">
        <h5> Shopping Cart </h5>
        <div class="card shadow border-0 mt-3"  *ngFor="let product of disProductList">
            <div class="row"> 
              <div class="col-2"> 
               <img src="loginpic.jpeg" class="img-thumbnail imgscr">
              </div>
              <div class="col-10">
                <div class="card-body">
                   <div class="row">  
                    <div class="col-8">
                      <h5 class="card-title">{{ product.ProductName }}  (  <span class="quantity"> {{ product.Quantity}}</span> )</h5>
                      <p class="card-text">{{ product.ProductCategory }}</p>
                      <p class="card-text">MRP: SR.{{ product.price}}
                        
                    </div>
                    <div class="col-4">
                      <div class="quantity-controls">
                        <button class="btn btn-outline-primary me-3" (click)="decrementQuantity(product)">-</button>
                        <button class="btn btn-outline-primary me-3" (click)="incrementQuantity(product)">+</button>

                      </div>
                    </div>
                   </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 flex-end">
              <div class="flex-end">
                <span  class="badge bg-secondary flex-end">                  
                  Subtotal ( {{ product.Quantity}} item):SR.   {{ product.TotalAmount}}
                </span>
              </div>
               
              </div>
            </div>
          </div>
        </div>
        <div class="col-3 card-header text-center  align-items-center" style="background-color:#F8F8F8;height: 30%;">
            <table>
              <tr>
                <td colspan="2">
                  <h6 class="card-title">Sub Totle (SAR. {{this.totalAmount }})</h6>
                 <hr>
                </td>
              </tr>
              <tr>
                <td>
                  <a  data-bs-toggle="modal" data-bs-target="#staticBackdrop" class=" form-control-block me-3" >
                    <img src="Debit-Card.jpg" style="width: 150px;height: 150px;">
                  </a>
                  <td>
                    <a type="button" routerLink="/all" style="width: 130px;height: 120px;" class="btn btn-secondary form-control-block me-3"> Choose more Items ....</a>
                  </td>
              </tr>
            </table>
            <hr>
  
           <br>

        </div>
   </div>
     <!-- ----/ cart-------- -->

</div>
<ng-template #emptyCart>
  <div class="mt-3">
    <div class="card shadow">
      <div class="card-body">
        <h5 class="card-title">Your's CART is emply , Order Now</h5>
        <p class="card-text"></p>
        <a routerLink="/all" class="btn btn-outline-primary">Back to store</a>
      </div>
    </div>
  </div>
</ng-template>


  <!-- ---------------------------Model for print -------------------- -->
   <!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Print Order</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table #orderTable id="orderTable" class="table">
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Total Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of disProductList">
              <td>{{product.ProductName}}</td>
              <td>{{product.price}}</td>
              <td>{{product.Quantity}}</td>
              <td>{{product.TotalAmount}}</td>
            </tr>
            <tr>
              <td colspan="4" class="text-center">Sub Totle (SAR. {{this.totalAmount }})</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary"  data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-outline-primary" (click)="print(disProductList)">Print</button>
      </div>
    </div>
  </div>
</div>