import './polyfills.server.mjs';
import{a as Y,b as K}from"./chunk-QRWQY24P.mjs";import{a as Q,b as Z,c as R}from"./chunk-JOJ2LS6H.mjs";import{p as D,r as X,s as E}from"./chunk-XRF5VEMI.mjs";import{$ as a,Aa as z,Da as N,Ea as J,Fa as k,K as s,L as u,Q as x,S as C,U as r,Ua as W,V as n,W as m,X as _,Xa as M,Y as f,Ya as w,Z as L,_ as O,_a as A,aa as S,b as U,ba as b,ca as $,ha as I,ia as q,j as H,k as F,p as y,q as T,u as g,v}from"./chunk-MUB4C7OA.mjs";import"./chunk-NDYDZJSS.mjs";var V=(()=>{let o=class o{constructor(e,t){this.myrouter=e,this._LoginService=t,this.target="/home/user",this.CurrentUser="Unknown",this.CurrentUser=this._LoginService.GetUserName()}ngOnInit(){}Logout(){this._LoginService.Logout(),this.myrouter.navigate(["login"])}};o.\u0275fac=function(t){return new(t||o)(u(M),u(E))},o.\u0275cmp=y({type:o,selectors:[["app-mysaleheader"]],standalone:!0,features:[I],decls:19,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","logos.jpg","alt","Logo","width","30","height","30",1,"d-inline-block","align-text-top"],["id","navbarSearch",1,"collapse","navbar-collapse","justify-content-center"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav"],[1,"nav-item","content-justify-right"],["tabindex","-1","aria-disabled","true",1,"nav-link",3,"routerLink"],[1,"fas","fa-user"],[1,"content-justify-right"],[1,"nav-link","btn","btn-sm","btn-outline-success",3,"click"]],template:function(t,i){t&1&&(r(0,"nav",0)(1,"div",1),m(2,"app-notification"),r(3,"a",2),m(4,"img",3),r(5,"span")(6,"b"),a(7," HomeStore.com "),n()()(),m(8,"div",4),r(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),m(13,"i",9),a(14),n()(),r(15,"li",7)(16,"div",10)(17,"a",11),f("click",function(){return i.Logout()}),a(18," Logout"),n()()()()()()()),t&2&&(s(12),C("routerLink",i.target),s(2),b(" User Profile [",i.CurrentUser,"] "))},dependencies:[w,K]});let c=o;return c})();var j=(()=>{let o=class o{constructor(){this.myproductsList=[],this.certSubject=new U([]),this.isLocalStorageAvailable=typeof localStorage<"u",this.searchSubject=new U("")}setSearchQuesry(e){if(this.isLocalStorageAvailable){let t=localStorage.setItem("search",e)}}getSearchQuesry(){return this.isLocalStorageAvailable?localStorage.getItem("search"):""}setSearchBehaviourForSearch(e){let t=this.getSearchQuesry();this.searchSubject.next(e)}getSearchBehaviourForSearch(){return this.searchSubject.asObservable()}getCertForAllItems(e){this.myproductsList=this.getCartFromLocalStorage();let t=this.myproductsList.find(i=>i.ProductID==e.ProductID);t?(t.Quantity=t.Quantity+1,t.TotalAmount=t.Quantity*t.price):this.myproductsList.push(e),this.updateCartInLocalStorage(this.myproductsList),this.certSubject.next(this.myproductsList)}RemoveCertForItem(e){this.myproductsList=this.getCartFromLocalStorage();let t=this.myproductsList.find(i=>i.ProductID==e.ProductID);t&&(t.Quantity=t.Quantity-1,t.Quantity>0?t.TotalAmount=t.Quantity*t.price:this.myproductsList=this.myproductsList.filter(i=>i.ProductID!==e.ProductID)),this.updateCartInLocalStorage(this.myproductsList),this.certSubject.next(this.myproductsList)}getCertForAllItemsObservable(){return this.myproductsList=this.getCartFromLocalStorage(),this.certSubject.next(this.myproductsList),this.certSubject.asObservable()}getCartFromLocalStorage(){if(this.isLocalStorageAvailable){let e=localStorage.getItem("cart");return e?JSON.parse(e):[]}else return[]}updateCartInLocalStorage(e){this.isLocalStorageAvailable&&localStorage.setItem("cart",JSON.stringify(e))}ClearCartInLocalStorage(){alert("ClearCartInLocalStorage"),this.isLocalStorageAvailable&&(this.updateCartInLocalStorage([]),this.certSubject.next([]))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=H({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();function ct(c,o){if(c&1){let d=_();r(0,"div",26)(1,"div",27),m(2,"img",28),r(3,"div",29)(4,"h5",30),a(5),n(),r(6,"p",31),a(7),n(),r(8,"div",32)(9,"div",33)(10,"span",34),a(11),n()(),r(12,"div",35)(13,"span",36),a(14),n()()()(),r(15,"div",37)(16,"button",38),f("click",function(){let t=g(d).$implicit,i=L();return v(i.addToCart(t))}),a(17,"Add to Cart"),n()()()()}if(c&2){let d=o.$implicit;s(5),S(d.name),s(2),S(d.category),s(4),b("SR. ",d.price,""),s(3),b("",d.quantity," in stock")}}var B=(()=>{let o=class o{constructor(e,t,i,l,h,p,nt){this.service=e,this._cartService=t,this.ro=i,this.NotificationServic=l,this.orderService=h,this.serviceCart=p,this._LoginService=nt,this.product=new Q("","","","",0,0),this.productList=[],this.countProducts=0,this.target="",this.NumberOfItemsInCart=0,this.ListcartByProductsObject=[],this.target="cart"}ngOnInit(){this.service.GetProductListService().subscribe(e=>{this.productList=e,this.countProducts=this.productList.length}),this.itemSelected()}itemSelected(){this.serviceCart.getCertForAllItemsObservable().subscribe(e=>{var t=e;let i=this._LoginService.GetUserName();t=t.filter(h=>h.customername===i);let l=t.reduce((h,p)=>h+p.Quantity,0);this.NumberOfItemsInCart=l},e=>{console.log("error is cert service at CartComponent")})}addToCart(e){let t=`ITEM: ${e.name} 
PRICE :  SR.${e.price}`;this.NotificationServic.showNotification(t);let i=this._LoginService.GetUserName(),l=this.orderService.MapOdertoOrderDetails(e);l.customername=i,this._cartService.getCertForAllItems(l)}Search(e){let t=e.value;this.service.GetProductListService().subscribe(i=>{this.productList=i,this.countProducts=this.productList.length,this.productList=this.productList.filter(l=>l.name.toLowerCase().includes(t))})}fullList(){this.service.GetProductListService().subscribe(e=>{this.productList=e,this.countProducts=this.productList.length}),this.itemSelected()}onCommunicationCheckboxChange(e){e.target.checked?this.productList=this.productList.filter(i=>i.category==="Communication"):this.fullList()}onEducationalCheckboxChange(e){e.target.checked?this.productList=this.productList.filter(i=>i.category==="Educational"):this.fullList()}onHomeApplianceCheckboxChange(e){e.target.checked?this.productList=this.productList.filter(i=>i.category==="Home Appliance"):this.fullList()}onAllItemCheckboxChange(e){e.target.checked?this.productList=this.productList.filter(i=>i.category==="Home Appliance"):this.fullList()}};o.\u0275fac=function(t){return new(t||o)(u(Z),u(j),u(W),u(Y),u(R),u(j),u(E))},o.\u0275cmp=y({type:o,selectors:[["app-allproduct"]],standalone:!0,features:[I],decls:38,vars:3,consts:[["txtSearch",""],[1,"container-fluid"],[1,"row"],[1,"col-1"],[1,"form-check","form-switch"],["type","checkbox","value","Home","id","flexSwitchCheckDefault",1,"form-check-input",3,"change"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","checkbox","id","flexSwitchCheckChecked","checked","",1,"form-check-input",3,"change"],["for","flexSwitchCheckChecked",1,"form-check-label"],["type","checkbox","id","flexSwitchCheckDisabled",1,"form-check-input",3,"change"],["for","flexSwitchCheckDisabled",1,"form-check-label"],["type","checkbox","id","flexSwitchCheckCheckedDisabled","checked","",1,"form-check-input",3,"change"],["for","flexSwitchCheckCheckedDisabled",1,"form-check-label"],[1,"col-10"],[1,"container"],[1,"input-group","my-20"],["id","btnGroupAddon",1,"input-group-text"],[1,"fa-solid","fa-magnifying-glass"],["type","text","id","txtSearch","placeholder","Search HomeStore.sa     click item to push into your CART","aria-label","Input group example","aria-describedby","btnGroupAddon",1,"form-control",3,"input"],[1,"row","mt-1"],["class","col-3 mt-3",4,"ngFor","ngForOf"],[1,"col-1","cart-container"],[1,"cart-container"],[3,"routerLink"],["src","Cart.jpeg","alt","Cart",1,"cart-image"],[1,"item-count"],[1,"col-3","mt-3"],[1,"card","shadow-sm"],["src","./logos.jpg","alt","Product Image",1,"card-img-top","imgcss"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-muted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"price"],[1,"text-primary","fw-bold"],[1,"quantity"],[1,"badge","bg-secondary"],[1,"card-footer"],[1,"btn","btn-outline-primary","mt-3",3,"click"]],template:function(t,i){if(t&1){let l=_();m(0,"app-mysaleheader"),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"i"),a(5,"Category"),n(),r(6,"div",4)(7,"input",5),f("change",function(p){return g(l),v(i.onCommunicationCheckboxChange(p))}),n(),r(8,"label",6),a(9,"Commun"),n()(),r(10,"div",4)(11,"input",7),f("change",function(p){return g(l),v(i.onHomeApplianceCheckboxChange(p))}),n(),r(12,"label",8),a(13,"Appliance "),n()(),r(14,"div",4)(15,"input",9),f("change",function(p){return g(l),v(i.onEducationalCheckboxChange(p))}),n(),r(16,"label",10),a(17,"Educational"),n()(),r(18,"div",4)(19,"input",11),f("change",function(p){return g(l),v(i.onAllItemCheckboxChange(p))}),n(),r(20,"label",12),a(21,"All Item"),n()()(),r(22,"div",13)(23,"div",14)(24,"div",15)(25,"div",16),m(26,"i",17),n(),r(27,"input",18,0),f("input",function(){g(l);let p=O(28);return v(i.Search(p))}),n()(),r(29,"div",19),x(30,ct,18,4,"div",20),n()(),m(31,"div",3),n(),r(32,"div",21)(33,"div",22)(34,"a",23),m(35,"img",24),r(36,"span",25),a(37),n()()()()()()}t&2&&(s(30),C("ngForOf",i.productList),s(4),C("routerLink",i.target),s(3),S(i.NumberOfItemsInCart))},dependencies:[V,D,k,N,w],styles:[".imgcss[_ngcontent-%COMP%]{width:30%;height:30%}.cart-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.cart-image[_ngcontent-%COMP%]{width:50px}.item-count[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background-color:#1a92bc;color:#e3d9d9;border-radius:50%;padding:2px 6px;font-size:16px;font:bold}"]});let c=o;return c})();function lt(c,o){if(c&1){let d=_();r(0,"div",26)(1,"div",27)(2,"div",28),m(3,"img",29),n(),r(4,"div",30)(5,"div",31)(6,"div",27)(7,"div",32)(8,"h5",22),a(9),r(10,"span",33),a(11),n(),a(12," )"),n(),r(13,"p",34),a(14),n(),r(15,"p",34),a(16),n()(),r(17,"div",35)(18,"div",36)(19,"button",37),f("click",function(){let t=g(d).$implicit,i=L(2);return v(i.decrementQuantity(t))}),a(20,"-"),n(),r(21,"button",37),f("click",function(){let t=g(d).$implicit,i=L(2);return v(i.incrementQuantity(t))}),a(22,"+"),n()()()()()()(),r(23,"div",27)(24,"div",38)(25,"div",39)(26,"span",40),a(27),n()()()()()}if(c&2){let d=o.$implicit;s(9),b("",d.ProductName," ( "),s(2),b(" ",d.Quantity,""),s(3),S(d.ProductCategory),s(2),b("MRP: SR.",d.price," "),s(11),$(" Subtotal ( ",d.Quantity," item):SR. ",d.TotalAmount," ")}}function st(c,o){if(c&1&&(r(0,"div",17)(1,"div",18)(2,"h5"),a(3," Shopping Cart "),n(),x(4,lt,28,6,"div",19),n(),r(5,"div",20)(6,"table")(7,"tr")(8,"td",21)(9,"h6",22),a(10),n(),m(11,"hr"),n()(),r(12,"tr")(13,"td")(14,"a",23),m(15,"img",24),n()(),r(16,"td")(17,"a",25),a(18," Choose more Items ...."),n()()()(),m(19,"hr")(20,"br"),n()()),c&2){let d=L();s(4),C("ngForOf",d.disProductList),s(6),b("Sub Totle (SAR. ",d.totalAmount,")")}}function dt(c,o){c&1&&(r(0,"div",41)(1,"div",42)(2,"div",31)(3,"h5",22),a(4,"Your's CART is emply , Order Now"),n(),m(5,"p",34),r(6,"a",43),a(7,"Back to store"),n()()()())}function mt(c,o){if(c&1&&(r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td"),a(6),n(),r(7,"td"),a(8),n()()),c&2){let d=o.$implicit;s(2),S(d.ProductName),s(2),S(d.price),s(2),S(d.Quantity),s(2),S(d.TotalAmount)}}var G=(()=>{let o=class o{constructor(e,t,i,l,h,p){this.serviceCart=e,this.rout=i,this._AuthService=l,this._LoginService=h,this._OrderService=p,this.disProductList=[],this.showDiv=!0,this.totalAmount=0}ngOnInit(){Q,this.serviceCart.getCertForAllItemsObservable().subscribe(e=>{var t=this._LoginService.GetUserName();this.disProductList=e.filter(l=>l.customername===t),this.calculateTotalAmount(),this.disProductList.length>0&&(this.showDiv=!1)},e=>{console.log("error is cert service at CartComponent")})}calculateTotalAmount(){this.totalAmount=this.disProductList.reduce((e,t)=>e+t.TotalAmount,0)}print(e){if(this._LoginService.IsLoggedIn()){this._OrderService.CreateOderPayload(e).subscribe(l=>{console.log("order submitted"+l)},l=>{console.log("error in post resquest")});let i=e}else{alert("User is UNAUTHORISED , No delivery address is found associated .  Please login to place an order"),jQuery("#staticBackdrop").modal("toggle"),jQuery(".modal-backdrop").remove(),this.rout.navigate(["login"]);return}let t=document.getElementById("orderTable");if(t!=null){let i=window.open("","","height=600,width=800");i!=null&&(i.document.write("<html><head><title>Print Order</title>"),i.document.write("<style>"),i.document.write("table { width: 100%; border-collapse: collapse; }"),i.document.write("table, th, td { border: 1px solid black; padding: 10px; }"),i.document.write("th, td { text-align: left; }"),i.document.write("</style>"),i.document.write("</head><body >"),i.document.write(t.outerHTML),i.document.write("</body></html>"),i.document.close(),i.print(),i.onafterprint=()=>{i.close()},this.serviceCart.ClearCartInLocalStorage(),this.disProductList=[])}jQuery("#staticBackdrop").modal("toggle"),jQuery(".modal-backdrop").remove(),this.rout.navigate(["all"])}decrementQuantity(e){this.serviceCart.RemoveCertForItem(e)}incrementQuantity(e){this.serviceCart.getCertForAllItems(e)}};o.\u0275fac=function(t){return new(t||o)(u(j),u(z),u(M),u(X),u(E),u(R))},o.\u0275cmp=y({type:o,selectors:[["app-cart"]],standalone:!0,features:[I],decls:35,vars:4,consts:[["emptyCart",""],["orderTable",""],[1,"container","mt-3"],["class","row mt-3","style","border: 1px solid #F8F9FA;",4,"ngIf","ngIfElse"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","orderTable",1,"table"],[4,"ngFor","ngForOf"],["colspan","4",1,"text-center"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"row","mt-3",2,"border","1px solid #F8F9FA"],[1,"col-9"],["class","card shadow border-0 mt-3",4,"ngFor","ngForOf"],[1,"col-3","card-header","text-center","align-items-center",2,"background-color","#F8F8F8","height","30%"],["colspan","2"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"form-control-block","me-3"],["src","Debit-Card.jpg",2,"width","150px","height","150px"],["type","button","routerLink","/all",1,"btn","btn-secondary","form-control-block","me-3",2,"width","130px","height","120px"],[1,"card","shadow","border-0","mt-3"],[1,"row"],[1,"col-2"],["src","loginpic.jpeg",1,"img-thumbnail","imgscr"],[1,"col-10"],[1,"card-body"],[1,"col-8"],[1,"quantity"],[1,"card-text"],[1,"col-4"],[1,"quantity-controls"],[1,"btn","btn-outline-primary","me-3",3,"click"],[1,"col-12","flex-end"],[1,"flex-end"],[1,"badge","bg-secondary","flex-end"],[1,"mt-3"],[1,"card","shadow"],["routerLink","/all",1,"btn","btn-outline-primary"]],template:function(t,i){if(t&1){let l=_();m(0,"app-mysaleheader"),r(1,"div",2),x(2,st,21,2,"div",3),n(),x(3,dt,8,0,"ng-template",null,0,q),r(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),a(10,"Print Order"),n(),m(11,"button",9),n(),r(12,"div",10)(13,"table",11,1)(15,"thead")(16,"tr")(17,"th"),a(18,"Product Name"),n(),r(19,"th"),a(20,"Price"),n(),r(21,"th"),a(22,"Quantity"),n(),r(23,"th"),a(24,"Total Amount"),n()()(),r(25,"tbody"),x(26,mt,9,4,"tr",12),r(27,"tr")(28,"td",13),a(29),n()()()()(),r(30,"div",14)(31,"button",15),a(32,"Close"),n(),r(33,"button",16),f("click",function(){return g(l),v(i.print(i.disProductList))}),a(34,"Print"),n()()()()()}if(t&2){let l=O(4);s(2),C("ngIf",i.disProductList.length>0)("ngIfElse",l),s(24),C("ngForOf",i.disProductList),s(3),b("Sub Totle (SAR. ",i.totalAmount,")")}},dependencies:[V,k,N,J,w],styles:["@media print{.btn[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{page-break-inside:avoid}}.imgscr[_ngcontent-%COMP%]{width:100%;height:148px}.scctxttotal[_ngcontent-%COMP%]{background-color:#dce7e9;color:#3d5592;font-size:0vw;font-family:Verdana,Geneva,Tahoma,sans-serif;border-radius:5px}"]});let c=o;return c})();var ut=[{path:"",component:B},{path:"all",component:B},{path:"cart",component:G},{path:"all/cart",component:G},{path:"",redirectTo:"/all",pathMatch:"full"}],rt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=T({type:o}),o.\u0275inj=F({imports:[A.forChild(ut),A]});let c=o;return c})();var Gt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=T({type:o}),o.\u0275inj=F({imports:[k,rt,D,A]});let c=o;return c})();export{Gt as MysaleModule};
